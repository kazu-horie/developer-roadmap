# 12. Learn a NoSQL Database

## 目次

## 概要

NoSQL (Not only SQL) は、非リレーショナルデータベースを表す総称 (バズワード)。
RDBで処理することが難しい半構造化データを扱う場合にNoSQLが用いられる。

|データの分類||説明|
|---|---|---|
|非リレーショナルデータ| 非構造化データ | 構造がない (e.g. バイナリテキスト) |
|非リレーショナルデータ| 半構造化データ | 構造はあるがスキーマがない (e.g. JSON, XML) |
|リレーショナルデータ| 構造化データ | スキーマがあり、構造が変わりにくい |

### NoSQL の種類

- KVS (キーバリューストア)
  - キーでアクセスするシンプルな使い方がメイン
  - キーバリューモデルとワイドカラムモデルの二つに大別される
- ドキュメントDB
  - KVSの特徴に加え、JSONを扱う機能が豊富
  - インデックス, JSONの特定のクエリ
- グラフDB
  - ノード間の関連からなるデータ構造
    - 多様な関係性(e.g. 友達である、フォローしている、交際している)を表現することが得意
  - スケールアウトできないが、RDB以上に複雑なデータ処理が可能

### NoSQL のメリット

- データにあったデータモデルを選択できる
  - "hostname": "db01" というデータにテーブルは必要？
  - 深い階層を持つJSONをRDBに入れようとすると、リレーショナルが大変
- 事前にスキーマを定義しなくてもデータを格納できる
  - 外部データの構造が変化するごとに、RDBスキーマの変更をしなくてはいけない
  - 外部データの構造が突然変わってデータを取得できないリスクを回避できる
- プロトタイプはドキュメントDBで早く作り、本番はRDBでかっちり作るという手法がとられるようになってきている

### NoSQL のデメリット

- RDBより機能が乏しい (KVS, ドキュメントDB)
  - 集計クエリ、ソート、主キー以外で検索、一部更新 など
- 整合性を保つ機能が使えない (KVS, ドキュメントDB)
- スキーマ管理をしないと何が入っているかわからなくなる
  - RDB以上にスキーマの管理が重要
  - バリデーションが提供されていないものもある

## NoSQL の位置づけ


