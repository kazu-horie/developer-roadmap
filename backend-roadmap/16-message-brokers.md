# 16. Message Brokers

## 目標

1. メッセージブローカーとは何かを理解し、メッセージング機能を実装できるようになる。

## 目次

- [メッセージ指向ミドルウェア](#メッセージ指向ミドルウェア)
- [メッセージキューイング](#メッセージキューイング)
- [メッセージブローカー](#メッセージブローカー)

## メッセージ指向ミドルウェア

- 異なるソフトウェア間の非同期メッセージ転送を実現するミドルウェア
- 多くはメッセージキューイングというモデルで実現

> メッセージ指向ミドルウェア（メッセージしこうミドルウェア、英: Message-oriented middleware、MOM）とは、アプリケーションソフトウェア間のデータ通信ソフトウェアであり、一般に非同期メッセージパッシングに基づいたものを指す。

source: [メッセージ指向ミドルウェア - wikipedia](https://ja.wikipedia.org/wiki/%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E6%8C%87%E5%90%91%E3%83%9F%E3%83%89%E3%83%AB%E3%82%A6%E3%82%A7%E3%82%A2)

### 利点

メッセージを送達する過程で保管、ルーティング、変換できる点

- 保管
  - 送信側と受信側が同時に接続されている必要がない
- ルーティング
  - 一つのメッセージを複数の受信者に配布可能
- 変換
  - 受信者と送信者共にメッセージ形式を考慮する必要がない

非同期・疎結合

- 送信側はメッセージの送信までを考えれば良い
- 受信側はメッセージの取得だけを考えれば良い

### モデル

- Publish / Subscribe (1対多)
- Point-to-Point (1対1)

### プロトコル

- AMQP (Advanced Message Queuing Protocol)
  - 仕様がオープン
  - 高信頼性
  - 高度なメッセージ配信が可能
- MQTT (MQ Telemetry Transport)
  - 軽量・省電力なプロトコル
  - 1 対 N に特化したメッセージング

詳しくは [MQTTとAMQPと.NET - terurou](https://www.slideshare.net/terurou/mqttamqpnet)

## メッセージキューイング

メッセージ指向ミドルウェアを実現する手法。

他にも、マルチキャストやブロードキャストによって実現する手法もある。

メッセージキューイングでは、メッセージブローカーなどのソフトウェアがメッセージキューと呼ばれる専用のデータ保管領域を管理することで実現。

source: [メッセージキューイング - IT用語辞典](http://e-words.jp/w/%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%AD%E3%83%A5%E3%83%BC%E3%82%A4%E3%83%B3%E3%82%B0.html)

## メッセージブローカー

- https://stackoverflow.com/questions/13202200/message-broker-vs-mom-message-oriented-middleware

## TODO

- メッセージブローカーについてざっと書く
- RabbitMQ について
- チュートリアルやる
- なんか応用してみる？ (Option)